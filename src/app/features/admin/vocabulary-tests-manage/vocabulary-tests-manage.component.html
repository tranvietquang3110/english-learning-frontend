<div class="p-6">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800">
      {{
        selectedTopic
          ? "Quáº£n lÃ½ bÃ i test - " + selectedTopic.name
          : "Quáº£n lÃ½ bÃ i test tá»« vá»±ng"
      }}
    </h1>
    <div class="flex gap-3">
      <button
        *ngIf="selectedTopic && currentState === State.View"
        (click)="onCreateTest()"
        class="bg-primary text-white px-4 py-2 rounded-lg hover:opacity-80"
      >
        Táº¡o bÃ i test má»›i
      </button>
      <button
        *ngIf="selectedTopic"
        (click)="goBackToTopics()"
        class="bg-navy-header text-white px-4 py-2 rounded-lg hover:opacity-80"
      >
        Quay láº¡i danh sÃ¡ch chá»§ Ä‘á»
      </button>
    </div>
  </div>

  <!-- Topic Selection View -->
  <div
    *ngIf="!selectedTopic && currentState === State.View"
    class="view-transition"
  >
    <div class="mb-6">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">
        Chá»n chá»§ Ä‘á» Ä‘á»ƒ quáº£n lÃ½ bÃ i test
      </h2>
      <p class="text-gray-600">
        Vui lÃ²ng chá»n má»™t chá»§ Ä‘á» tá»« vá»±ng Ä‘á»ƒ xem vÃ  quáº£n lÃ½ cÃ¡c bÃ i test.
      </p>
    </div>

    <!-- Topics Grid -->
    <app-topic-test-card-grid
      [topics]="topicsBase"
      (topicSelect)="onTopicSelect($event)"
    ></app-topic-test-card-grid>

    <!-- Empty State -->
    <div *ngIf="topics.length === 0" class="text-center py-12">
      <div class="text-gray-400 text-6xl mb-4">ğŸ“š</div>
      <h3 class="text-xl font-semibold text-gray-600 mb-2">
        ChÆ°a cÃ³ chá»§ Ä‘á» nÃ o
      </h3>
      <p class="text-gray-500">
        HÃ£y táº¡o chá»§ Ä‘á» tá»« vá»±ng trÆ°á»›c khi quáº£n lÃ½ bÃ i test.
      </p>
    </div>
  </div>

  <!-- Tests Management View -->
  <div
    *ngIf="selectedTopic && currentState === State.View"
    class="view-transition"
  >
    <!-- Tests List -->
    <app-test-list
      [tests]="testsBase"
      (viewTest)="onViewTest($event)"
      (editTest)="onEditTest($event)"
      (deleteTest)="onDeleteTest($event)"
      [selectedTopicName]="selectedTopic?.name || ''"
      (createTest)="onCreateTest()"
      (pageChange)="onPageChange($event)"
    ></app-test-list>
  </div>

  <!-- Create Test Form -->
  <div *ngIf="currentState === State.Create" class="view-transition">
    <app-test-form
      [config]="vocabularyTestConfig"
      (save)="onSaveTest($event)"
      (cancel)="onCancelCreate()"
    ></app-test-form>
  </div>

  <!-- Confirm Delete Dialog -->
  <app-confirm-dialog
    [isVisible]="showDeleteConfirm"
    title="XÃ³a bÃ i test"
    [message]="
      'Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a bÃ i test \'' +
      (testToDelete?.name || '') +
      '\'? HÃ nh Ä‘á»™ng nÃ y khÃ´ng thá»ƒ hoÃ n tÃ¡c.'
    "
    confirmText="XÃ³a"
    cancelText="Há»§y"
    confirmButtonClass="form-button-danger"
    cancelButtonClass="form-button-secondary"
    (confirm)="onConfirmDelete()"
    (cancel)="onCancelDelete()"
  ></app-confirm-dialog>
</div>
